<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Websocket-client : websocket client for python" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Websocket-client</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/liris/websocket-client">View on GitHub</a>

          <h1 id="project_title">Websocket-client</h1>
          <h2 id="project_tagline">websocket client for python</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/liris/websocket-client/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/liris/websocket-client/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1></h1>

<h1>
<a name="websocket-client" class="anchor" href="#websocket-client"><span class="octicon octicon-link"></span></a>websocket-client</h1>

<p>websocket-client module  is WebSocket client for python. This provide the low level APIs for WebSocket. All APIs are the synchronous functions.</p>

<p>websocket-client supports only hybi-13.</p>

<h1>
<a name="caution" class="anchor" href="#caution"><span class="octicon octicon-link"></span></a>CAUTION</h1>

<p>We have a big change on version 0.14.0.
So, please test on trunk repository.</p>

<h1>
<a name="v014-release-schedule" class="anchor" href="#v014-release-schedule"><span class="octicon octicon-link"></span></a>v0.14 release schedule</h1>

<p>Now, under testing.
v0.14 will be released on May 15.</p>

<h1>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h1>

<ul>
<li>LGPL</li>
</ul><h1>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h1>

<p>This module is tested on Python 2.7 and Python 3.x.</p>

<p>Type "python setup.py install" or "pip install websocket-client" to install.</p>

<p>This module depend on</p>

<ul>
<li>six</li>
<li>backports.ssl_match_hostname for Python 2.x</li>
</ul><h1>
<a name="how-about-python-3" class="anchor" href="#how-about-python-3"><span class="octicon octicon-link"></span></a>How about Python 3</h1>

<p>Now, we support python 3 on  single source code from version 0.14.0. Thanks, <a href="https://github.com/battlemidget" class="user-mention">@battlemidget</a> and <a href="https://github.com/ralphbean" class="user-mention">@ralphbean</a>.</p>

<h1>
<a name="http-proxy" class="anchor" href="#http-proxy"><span class="octicon octicon-link"></span></a>HTTP Proxy</h1>

<p>Support websocket access via http proxy.
The proxy server must allow "CONNECT" method to websocket port.
Default squid setting is "ALLOWED TO CONNECT ONLY HTTPS PORT".</p>

<p>Current implementation of websocket-client is using "CONNECT" method via proxy.</p>

<h1>
<a name="example" class="anchor" href="#example"><span class="octicon octicon-link"></span></a>Example</h1>

<p>Low Level API example::</p>

<pre><code>    from websocket import create_connection
    ws = create_connection("ws://echo.websocket.org/")
    print "Sending 'Hello, World'..."
    ws.send("Hello, World")
    print "Sent"
    print "Reeiving..."
    result =  ws.recv()
    print "Received '%s'" % result
    ws.close()
</code></pre>

<p>If you want to customize socket options, set sockopt.</p>

<p>sockopt example:</p>

<pre><code>    from websocket import create_connection
    ws = create_connection("ws://echo.websocket.org/".
                            sockopt=((socket.IPPROTO_TCP, socket.TCP_NODELAY),) )
</code></pre>

<p>JavaScript websocket-like API example::</p>

<pre><code>    import websocket
    import thread
    import time

    def on_message(ws, message):
        print message

    def on_error(ws, error):
        print error

    def on_close(ws):
        print "### closed ###"

    def on_open(ws):
        def run(*args):
            for i in range(3):
                time.sleep(1)
                ws.send("Hello %d" % i)
            time.sleep(1)
            ws.close()
            print "thread terminating..."
        thread.start_new_thread(run, ())


    if __name__ == "__main__":
        websocket.enableTrace(True)
        ws = websocket.WebSocketApp("ws://echo.websocket.org/",
                                  on_message = on_message,
                                  on_error = on_error,
                                  on_close = on_close)
        ws.on_open = on_open
        ws.run_forever()
</code></pre>

<h1>
<a name="wsdumppy" class="anchor" href="#wsdumppy"><span class="octicon octicon-link"></span></a>wsdump.py</h1>

<p>wsdump.py is simple WebSocket test(debug) tool.</p>

<p>sample for echo.websocket.org::</p>

<pre><code>  $ wsdump.py ws://echo.websocket.org/
  Press Ctrl+C to quit
  &gt; Hello, WebSocket
  &lt; Hello, WebSocket
  &gt; How are you?
  &lt; How are you?
</code></pre>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<pre><code>usage::

  wsdump.py [-h] [-v [VERBOSE]] ws_url

WebSocket Simple Dump Tool

positional arguments:
  ws_url                websocket url. ex. ws://echo.websocket.org/

optional arguments:
  -h, --help                           show this help message and exit
WebSocketApp
  -v VERBOSE, --verbose VERBOSE    set verbose mode. If set to 1, show opcode. If set to 2, enable to trace websocket module
</code></pre>

<p>example::</p>

<pre><code>  $ wsdump.py ws://echo.websocket.org/
  $ wsdump.py ws://echo.websocket.org/ -v
  $ wsdump.py ws://echo.websocket.org/ -vv
</code></pre>

<h1>
<a name="changelog" class="anchor" href="#changelog"><span class="octicon octicon-link"></span></a>ChangeLog</h1>

<ul>
<li>
<p>v0.14.0</p>

<ul>
<li>Support python 3(#73)</li>
<li>Support IPv6(#77)</li>
<li>Support explicit web proxy(#57)</li>
</ul>
</li>
<li>
<p>v0.13.0</p>

<ul>
<li>MemoryError when receiving large amount of data (~60 MB) at once(ISSUE#59)</li>
<li>Controlling fragmentation(ISSUE#55)</li>
<li>server certificate validation(ISSUE#56)</li>
<li>PyPI tarball is missing test_websocket.py(ISSUE#65)</li>
<li>Payload length encoding bug(ISSUE#58)</li>
<li>disable Nagle algorithm by default(ISSUE#41)</li>
<li>Better event loop in WebSocketApp(ISSUE#63)</li>
<li>Skip tests that require Internet access by default(ISSUE#66)</li>
</ul>
</li>
<li>
<p>v0.12.0</p>

<ul>
<li>support keep alive for WebSocketApp(ISSUE#34)</li>
<li>fix some SSL bugs(ISSUE#35, #36)</li>
<li>fix "Timing out leaves websocket library in bad state"(ISSUE#37)</li>
<li>fix "WebSocketApp.run_with_no_err() silently eats all exceptions"(ISSUE#38)</li>
<li>WebSocketTimeoutException will be raised for ws/wss timeout(ISSUE#40)</li>
<li>improve wsdump message(ISSUE#42)</li>
<li>support fragmentation message(ISSUE#43)</li>
<li>fix some bugs</li>
</ul>
</li>
<li>
<p>v0.11.0</p>

<ul>
<li>Only log non-normal close status(ISSUE#31)</li>
<li>Fix default Origin isn't URI(ISSUE#32)</li>
<li>fileno support(ISSUE#33)</li>
</ul>
</li>
<li>
<p>v0.10.0</p>

<ul>
<li>allow to set HTTP Header to WebSocketApp(ISSUE#27)</li>
<li>fix typo in pydoc(ISSUE#28)</li>
<li>Passing a socketopt flag to the websocket constructor(ISSUE#29)</li>
<li>websocket.send fails with long data(ISSUE#30)</li>
</ul>
</li>
<li>
<p>v0.9.0</p>

<ul>
<li>allow to set opcode in WebSocketApp.send(ISSUE#25)</li>
<li>allow to modify Origin(ISSUE#26)</li>
</ul>
</li>
<li>
<p>v0.8.0</p>

<ul>
<li>many bug fix</li>
<li>some performance improvement</li>
</ul>
</li>
<li>
<p>v0.7.0</p>

<ul>
<li>fixed problem to read long data.(ISSUE#12)</li>
<li>fix buffer size boundary violation</li>
</ul>
</li>
<li>
<p>v0.6.0</p>

<ul>
<li>Patches: UUID4, self.keep_running, mask_key (ISSUE#11)</li>
<li>add wsdump.py tool</li>
</ul>
</li>
<li>
<p>v0.5.2</p>

<ul>
<li>fix Echo App Demo Throw Error: 'NoneType' object has no attribute 'opcode  (ISSUE#10)</li>
</ul>
</li>
<li>
<p>v0.5.1</p>

<ul>
<li>delete invalid print statement.</li>
</ul>
</li>
<li>
<p>v0.5.0</p>

<ul>
<li>support hybi-13 protocol.</li>
</ul>
</li>
<li>
<p>v0.4.1</p>

<ul>
<li>fix incorrect custom header order(ISSUE#1)</li>
</ul>
</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Websocket-client maintained by <a href="https://github.com/liris">liris</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
